<%= simple_form_for [:admin, @api_user] do |f| %>
  <fieldset class="form-horizontal info">
    <legend>User Info</legend>
    <div class="control-group">
      <div class="control-label">E-mail</div>
      <div class="controls"><%= @api_user.email %></div>
    </div>
    <div class="control-group">
      <div class="control-label">First Name</div>
      <div class="controls"><%= @api_user.first_name %></div>
    </div>
    <div class="control-group">
      <div class="control-label">Last Name</div>
      <div class="controls"><%= @api_user.last_name %></div>
    </div>
    <div class="control-group">
      <div class="control-label">Purpose</div>
      <div class="controls"><%= @api_user.use_description %></div>
    </div>
    <div class="control-group">
      <div class="control-label">Signed up</div>
      <div class="controls"><%= @api_user.created_at %></div>
    </div>
    <div class="control-group">
      <div class="control-label">API key</div>
      <div class="controls"><%= @api_user.api_key.truncate(16) %></div>
    </div>
  </fieldset>

  <fieldset>
    <legend>Rate Limiting</legend>
    <%= f.input :throttle_mode, :as => :radio_buttons, :collection => [:default, :unthrottled, :custom] %>
    <div id="throttle_mode_custom" style="<%= "display: none;" unless(@api_user.throttle_mode == :custom) %>">
      <%= f.input :throttle_hourly_limit %>
      <%= f.input :throttle_daily_limit %>
    </div>
    <%= f.input :throttle_by_ip, :as => :radio_buttons, :collection => [:false, :true], :checked => !!@api_user.throttle_by_ip %>
  </fieldset>

  <%= f.button :submit %>
<% end %>

<%= javascript_tag do %>
  $("input[name='api_user[throttle_mode]']").change(function() {
    if($(this).val() == "custom") {
      $("#throttle_mode_custom").show();
    } else {
      $("#throttle_mode_custom").hide();
    }
  });
<% end %>
