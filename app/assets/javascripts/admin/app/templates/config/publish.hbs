<h1>Publish Configuration Changes</h1>

{{#if hasChanges}}
  <form id="publish_form">
    {{#if model.config.apis.new}}
      <fieldset>
        <legend>{{model.config.apis.new.length}} New API Backends</legend>
        {{render "config/publish_record" model.config.apis.new category="apis"}}
      </fieldset>
    {{/if}}

    {{#if model.config.website_backends.new}}
      <fieldset>
        <legend>{{model.config.website_backends.new.length}} New Website Backends</legend>
        {{render "config/publish_record" model.config.website_backends.new category="website_backends"}}
      </fieldset>
    {{/if}}

    {{#if model.config.apis.modified}}
      <fieldset>
        <legend>{{model.config.apis.modified.length}} Modified API Backends</legend>
        {{render "config/publish_record" model.config.apis.modified category="apis"}}
      </fieldset>
    {{/if}}

    {{#if model.config.website_backends.modified}}
      <fieldset>
        <legend>{{model.config.website_backends.modified.length}} Modified Website Backends</legend>
        {{render "config/publish_record" model.config.website_backends.modified category="website_backends"}}
      </fieldset>
    {{/if}}

    {{#if model.config.apis.deleted}}
      <fieldset>
        <legend>{{model.config.apis.deleted.length}} Deleted API Backends</legend>
        {{render "config/publish_record" model.config.apis.deleted category="apis"}}
      </fieldset>
    {{/if}}

    {{#if model.config.website_backends.deleted}}
      <fieldset>
        <legend>{{model.config.website_backends.deleted.length}} Deleted Website Backends</legend>
        {{render "config/publish_record" model.config.website_backends.deleted category="website_backends"}}
      </fieldset>
    {{/if}}

    <div class="publish-toggle-checkboxes">
      <a href="#" id="toggle_checkboxes" {{action 'toggleAllCheckboxes' target='view'}} data-check-all="{{t 'admin.check_all'}}" data-uncheck-all="{{t 'admin.uncheck_all'}}">{{t 'admin.check_all'}}</a>
    </div>

    <div class="text-center">
      <button type="submit" {{action 'publish'}} id="publish_button" class="btn btn-large btn-primary" data-loading-text="<i class='fa fa-refresh fa-spin'></i> Publishing...">Publish</button>
    </div>
  </form>
{{else}}
  <div class="row-fluid">
    <div class="span4 offset4">
      <div class="alert alert-success text-center">
        <big>Published configuration is up to date</big><br>
        <small><em>Recently published changes should be live within a few seconds</em></small>
      </div>
    </div>
  </div>
{{/if}}
